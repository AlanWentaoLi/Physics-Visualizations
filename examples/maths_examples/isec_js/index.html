<html>
	<head>
		<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
		<script src="./intersections.js"></script>
		<script src="./selector.js"></script>
		<link rel="stylesheet" href="./styles.css">
	</head>
	<body>
		<!-- Globals-->
		<script type="text/javascript">
		var selector = new Selector('dropdown');
		</script>
		<div class="container">
		<div id="points" class="column">
			<h1>Points</h1>
			<label> X <input id="pix" type="number" value="0.1"/></label>
			<label> Y <input id="piy" type="number" value="0.3"/></label>
			<label> Z <input id="piz" type="number" value="-0.2"/></label><br>
			<button type="button" id="generate_point" onclick="pushPoint()">Generate point</button></br>
			<script type="text/javascript">
			function pushPoint() {
				var ix = Number(document.getElementById("pix").value);
				var iy = Number(document.getElementById("piy").value);
				var iz = Number(document.getElementById("piz").value);
				var point = new Point(new Vector(ix,iy,iz));
				point.name = "New Point ("+objcounter+")";
				selector.add([point]);
			}
			</script>
		</div>
		<div id="lines" class="column">
			<h1>Lines</h1>
			<p>Direction vector</p>
			<label> X<input id="lix" type="number" value="0.1"/></label>
			<label> Y<input id="liy" type="number" value="0.3"/></label>
			<label> Z<input id="liz" type="number" value="0.0"/></label><br>
			<p>Offset vector</p>
			<label> X<input id="lnx" type="number" value="0.2" /></label>
			<label> Y<input id="lny" type="number" value="0.1"/></label>
			<label> Z<input id="lnz" type="number" value="0.0"/></label><br>
			<button type="button" id="generate_line" onclick="pushLine()">Generate Line</button></br>
			<script type="text/javascript">
			function pushLine() {
				var ix = Number(document.getElementById("lix").value);
				var iy = Number(document.getElementById("liy").value);
				var iz = Number(document.getElementById("liz").value);
				var nx = Number(document.getElementById("lnx").value);
				var ny = Number(document.getElementById("lny").value);
				var nz = Number(document.getElementById("lnz").value);
				var line = new Line(new Vector(ix,iy,iz), new Vector(nx,ny,nz));
				line.name = "New Line ("+objcounter+")";
				selector.add([line]);
			}
			</script>
		</div>
		<div id="planes">
			<h1>Planes</h1>
			<p>Normal vector</p>
			<label> X <input id="plix" type="number" value="0.1"/></label>
			<label> Y <input id="pliy" type="number" value="0.3"/> </label>
			<label> Z <input id="pliz" type="number" value="-0.2"/> </label>
			<br>
			<p>Offset vector</p>
			<label> X <input id="plnx" type="number" value="0.2" /></label>
			<label> Y <input id="plny" type="number" value="0.1"/></label>
			<label> Z <input id="plnz" type="number" value="0.4"/></label><br>
			<button type="button" id="generate_plane" onclick="pushPlane()">Generate Plane</button></br>
			<script type="text/javascript">
			function pushPlane() {
				var ix = Number(document.getElementById("plix").value);
				var iy = Number(document.getElementById("pliy").value);
				var iz = Number(document.getElementById("pliz").value);
				var nx = Number(document.getElementById("plnx").value);
				var ny = Number(document.getElementById("plny").value);
				var nz = Number(document.getElementById("plnz").value);
				var plane = new Plane(new Vector(ix,iy,iz), new Vector(nx,ny,nz));
				plane.name = "New Plane ("+objcounter+")";
				selector.add([plane]);
			}
			</script>
		</div>
	</div>
		<div id="dropdown" class="dropdown"> </div>
		<button type="button" id="test_selector" onclick="plot(selector.retrieveById(selector.checked()))"> Plot elements </button>
		<button type="button" id="test_selector" onclick="selector.add(intersectList(selector.retrieveById(selector.checked())))"> Intersect elements </button>
		<button type="button" id="test_selector" onclick="selector.rename(selector.checked())"> Rename elements </button>
		<button type="button" id="test_selector" onclick="selector.remove(selector.checked())"> Remove elements </button></br>
		<div id="plot" style="width:600px;height:250px;"></div>
		<script type="text/javascript">
		"use strict";
		function plot(objs) {
			console.log("plot() called: list to render: ",objs)
			var goified =[];
			var plotarea = document.getElementById('plot');
			var layout = {
				width: 600,
				height: 600,
				scene: {
					xaxis:
					{
						range: [-2,2]
					},
					yaxis:
					{
						range: [-2,2]
					},
					zaxis:
					{
						range: [-2,2]
					},
					camera:
					{
						up: {
							x: 0,
							y: 0,
							z: 1
						},
						eye: {
							x: -1.7428,
							y: 1.0707,
							z: 0.7100
						}
					},
					aspectratio: {x: 1, y: 1, z: 1},
				},
				margin: {l:0,r:0,b:0,t:0}};
			for(var obj in objs) {
				console.log(obj, objs[obj]);
				goified.push(objs[obj].goify(layout));
			}
			var data = goified;
			Plotly.newPlot(plotarea, data, layout);
		}
		</script>
		<div style="height: 200px;"></div>
	</body>
</html>
